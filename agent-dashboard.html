<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agent Dashboard - PKMONAD</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">
                <img src="assets/logo.png" alt="PKMONAD Logo"
                    onerror="this.src='https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/25.png'">
                <span>PKMONAD</span>
            </a>

            <button class="nav-toggle" id="navToggle"
                onclick="this.classList.toggle('active'); document.querySelector('.nav-menu').classList.toggle('open')">
                <span></span><span></span><span></span>
            </button>

            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="#" class="nav-link">
                        Pokédex <i class="fas fa-chevron-down" style="font-size: 0.7rem;"></i>
                    </a>
                    <div class="dropdown-menu">
                        <a href="pokedex.html" class="dropdown-item">Pokédex</a>
                        <a href="tcg-search.html" class="dropdown-item">Poké TCG</a>
                        <a href="pokememe.html" class="dropdown-item">PokéMeme</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="train.html" class="nav-link">Train</a>
                </li>
                <li class="nav-item">
                    <a href="battle.html" class="nav-link">Battle</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">
                        $PKMON <i class="fas fa-chevron-down" style="font-size: 0.7rem;"></i>
                    </a>
                    <div class="dropdown-menu">
                        <a href="https://nad.fun/tokens/0x39D691612Ef8B4B884b0aA058f41C93d6B527777" target="_blank"
                            class="dropdown-item">How to buy</a>
                        <a href="utility.html" class="dropdown-item">Utility</a>
                        <a href="#" class="dropdown-item" style="opacity: 0.6; cursor: not-allowed;">
                            Coming soon <span style="font-size: 0.6rem; vertical-align: middle;">⏳</span>
                        </a>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">
                        Poké Center <i class="fas fa-chevron-down" style="font-size: 0.7rem;"></i>
                    </a>
                    <div class="dropdown-menu">
                        <a href="https://x.com/pkmonad" target="_blank" class="dropdown-item">X (Twitter)</a>
                        <a href="https://t.me/pkmonad" target="_blank" class="dropdown-item">Telegram</a>
                    </div>
                </li>
                <a href="agent-dashboard.html" class="nav-link btn-start active"
                    onclick="event.preventDefault(); window.scrollTo({top:0, behavior:'smooth'}); if(window.innerWidth <= 768) { document.querySelector('.nav-toggle').click(); }">START</a>
                <li class="nav-item">
                    <button class="btn-wallet" id="connectWalletBtn">
                        <i class="fas fa-wallet"></i> Connect Wallet
                    </button>
                </li>
            </ul>
        </div>
    </nav>

    <!-- Dashboard Section -->
    <section class="section" style="padding-top: calc(var(--nav-height) + 2rem);">
        <div class="container" style="max-width: 1600px;">
            <div class="dashboard-header fade-in">
                <h1>PokéDex Trading Agent Dashboard</h1>
                <p>Real-time arbitrage analysis powered by AI agents</p>
            </div>

            <!-- CERT Input Section -->
            <div class="cert-input-section fade-in">
                <div class="input-card glass-card">
                    <h3><i class="fas fa-certificate"></i> Enter PSA CERT Number</h3>
                    <div class="cert-input-group">
                        <input type="text" id="certInput" placeholder="Enter PSA certification number (e.g., 12345678)">
                        <button class="btn-primary" onclick="startAnalysis()">
                            <i class="fas fa-rocket"></i> Start Analysis
                        </button>
                    </div>
                </div>
            </div>

            <!-- Agent Chat Interface -->
            <div class="agent-chat-section fade-in">
                <div class="chat-container glass-card">
                    <div class="chat-header">
                        <h3><i class="fas fa-comments"></i> Agent Communication</h3>
                        <div class="agent-status">
                            <span class="status-dot"></span>
                            <span id="statusText">Agents Ready</span>
                        </div>
                    </div>

                    <div class="chat-messages" id="chatMessages">
                        <div class="welcome-message">
                            <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/25.png"
                                alt="Pikachu" style="width: 80px; height: 80px; margin-bottom: 1rem;">
                            <p>Enter a PSA CERT number to begin the arbitrage analysis!</p>
                        </div>
                    </div>
                </div>

                <!-- Animated Pikachu Helper -->
                <div class="pikachu-container" id="pikachuContainer">
                    <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/25.png"
                        alt="Pikachu" id="pikachuSprite" class="pikachu-sprite">
                    <div class="pikachu-speech" id="pikachuSpeech">Pika! Ready to help!</div>
                </div>
            </div>

            <!-- Agents Grid -->
            <div class="agents-grid-dashboard">
                <!-- Sylveon Agent -->
                <div class="agent-dashboard-card" id="sylveonCard">
                    <div class="agent-card-header" style="background: linear-gradient(135deg, #EC4899, #F472B6);">
                        <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/700.png"
                            alt="Sylveon">
                        <h4>Sylveon</h4>
                        <span class="agent-role">PSA Analyzer</span>
                    </div>
                    <div class="agent-card-body" id="sylveonData">
                        <div class="agent-waiting">
                            <i class="fas fa-hourglass-half"></i>
                            <p>Waiting for CERT...</p>
                        </div>
                    </div>
                </div>

                <!-- Charizard Agent -->
                <div class="agent-dashboard-card" id="charizardCard">
                    <div class="agent-card-header" style="background: linear-gradient(135deg, #F97316, #FB923C);">
                        <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/6.png"
                            alt="Charizard">
                        <h4>Charizard</h4>
                        <span class="agent-role">FMV Calculator</span>
                    </div>
                    <div class="agent-card-body" id="charizardData">
                        <div class="agent-waiting">
                            <i class="fas fa-hourglass-half"></i>
                            <p>Waiting for data...</p>
                        </div>
                    </div>
                </div>

                <!-- Gengar Agent -->
                <div class="agent-dashboard-card" id="gengarCard">
                    <div class="agent-card-header" style="background: linear-gradient(135deg, #8B5CF6, #A78BFA);">
                        <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/94.png"
                            alt="Gengar">
                        <h4>Gengar</h4>
                        <span class="agent-role">Arbitrage Hunter</span>
                    </div>
                    <div class="agent-card-body" id="gengarData">
                        <div class="agent-waiting">
                            <i class="fas fa-hourglass-half"></i>
                            <p>Waiting for data...</p>
                        </div>
                    </div>
                </div>

                <!-- Dragonite Agent -->
                <div class="agent-dashboard-card" id="dragoniteCard">
                    <div class="agent-card-header" style="background: linear-gradient(135deg, #F59E0B, #FBBF24);">
                        <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/149.png"
                            alt="Dragonite">
                        <h4>Dragonite</h4>
                        <span class="agent-role">Currency Rates</span>
                    </div>
                    <div class="agent-card-body" id="dragoniteData">
                        <div class="agent-waiting">
                            <i class="fas fa-hourglass-half"></i>
                            <p>Loading rates...</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Arbitrage Results -->
            <div class="arbitrage-results" id="arbitrageResults" style="display: none;">
                <div class="results-card glass-card">
                    <h2><i class="fas fa-analytics"></i> Arbitrage Analysis Results</h2>
                    <div class="comparison-grid" id="comparisonGrid"></div>
                </div>
            </div>
        </div>
    </section>

    <style>
        .dashboard-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .dashboard-header h1 {
            font-size: 3rem;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, #FFFFFF, var(--secondary-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .cert-input-section {
            max-width: 1200px;
            margin: 0 auto 3rem;
        }

        .input-card h3 {
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
        }

        .input-card h3 i {
            color: var(--accent-yellow);
            margin-right: 0.75rem;
        }

        .cert-input-group {
            display: flex;
            gap: 1rem;
        }

        .cert-input-group input {
            flex: 1;
            padding: 1rem 1.5rem;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid var(--glass-border);
            border-radius: 12px;
            color: white;
            font-size: 1.1rem;
        }

        .cert-input-group input:focus {
            outline: none;
            border-color: var(--primary-purple);
        }

        .agent-chat-section {
            margin-bottom: 3rem;
            position: relative;
        }

        .chat-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .chat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--glass-border);
            margin-bottom: 1.5rem;
        }

        .chat-header h3 {
            font-size: 1.5rem;
        }

        .agent-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-secondary);
        }

        .status-dot {
            width: 10px;
            height: 10px;
            background: var(--accent-green);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.5;
            }
        }

        .chat-messages {
            min-height: 300px;
            max-height: 500px;
            overflow-y: auto;
            padding: 1rem;
        }

        .welcome-message {
            text-align: center;
            color: var(--text-secondary);
            padding: 3rem 0;
        }

        .chat-message {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            animation: slideIn 0.3s ease-out;
        }

        .message-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--glass-bg);
            padding: 0.5rem;
        }

        .message-avatar img {
            width: 100%;
            height: 100%;
        }

        .message-content {
            flex: 1;
            background: rgba(255, 255, 255, 0.05);
            padding: 1rem;
            border-radius: 12px;
            border: 1px solid var(--glass-border);
        }

        .message-sender {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--secondary-purple);
        }

        .message-text {
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .pikachu-container {
            position: fixed;
            /* Start position (will be updated by JS) */
            bottom: 20px;
            right: 20px;
            z-index: 9999;
            pointer-events: none;
            /* Allows clicking through */
            transition: transform 0.1s ease-out;
        }

        .pikachu-sprite {
            width: 120px;
            /* Slightly larger for official artwork */
            height: 120px;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        .pikachu-speech {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: white;
            color: #333;
            padding: 0.75rem 1rem;
            border-radius: 12px;
            margin-bottom: 0.5rem;
            white-space: nowrap;
            font-weight: 600;
            opacity: 0;
            transition: opacity 0.3s ease;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        .pikachu-speech.show {
            opacity: 1;
        }

        .agents-grid-dashboard {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 2rem;
            margin: 0 auto 3rem;
            max-width: 1200px;
        }

        @media (max-width: 1024px) {
            .agents-grid-dashboard {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 600px) {
            .agents-grid-dashboard {
                grid-template-columns: 1fr;
            }
        }

        .agent-dashboard-card {
            background: var(--bg-card);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .agent-dashboard-card:hover {
            border-color: var(--primary-purple);
            transform: translateY(-5px);
            box-shadow: var(--shadow-purple);
        }

        .agent-card-header {
            padding: 1.5rem;
            text-align: center;
        }

        .agent-card-header img {
            width: 80px;
            height: 80px;
            margin-bottom: 0.5rem;
        }

        .agent-card-header h4 {
            font-size: 1.5rem;
            color: white;
            margin-bottom: 0.25rem;
        }

        .agent-role {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
        }

        .agent-card-body {
            padding: 1.5rem;
            min-height: 200px;
        }

        .agent-waiting {
            text-align: center;
            color: var(--text-muted);
            padding: 2rem 0;
        }

        .agent-waiting i {
            font-size: 2rem;
            margin-bottom: 1rem;
            display: block;
        }

        .data-item {
            margin-bottom: 1rem;
        }

        .data-label {
            color: var(--text-muted);
            font-size: 0.85rem;
            margin-bottom: 0.25rem;
        }

        .data-value {
            color: var(--text-primary);
            font-size: 1.1rem;
            font-weight: 600;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .comparison-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 2rem;
        }

        .comparison-card h3 {
            margin-bottom: 1.5rem;
            font-size: 1.3rem;
        }

        .profit-indicator {
            font-size: 2rem;
            font-weight: 700;
            margin-top: 1rem;
        }

        .profit-positive {
            color: var(--accent-green);
        }

        .profit-negative {
            color: #EF4444;
        }

        .nav-toggle {
            display: none;
        }

        @media (max-width: 768px) {
            .navbar {
                padding: 0 1rem;
            }

            .nav-toggle {
                display: flex;
                flex-direction: column;
                gap: 5px;
                background: none;
                border: none;
                cursor: pointer;
                padding: 0.5rem;
                z-index: 1001;
            }

            .nav-toggle span {
                display: block;
                width: 24px;
                height: 2px;
                background: white;
                border-radius: 2px;
                transition: all 0.3s;
            }

            .nav-menu {
                display: none;
                flex-direction: column;
                position: fixed;
                top: var(--nav-height);
                left: 0;
                right: 0;
                background: rgba(10, 10, 15, 0.97);
                padding: 1rem 2rem 2rem;
                gap: 0.5rem;
                border-bottom: 1px solid var(--glass-border);
                z-index: 1000;
            }

            .nav-menu.open {
                display: flex;
            }
        }

        @media (max-width: 600px) {
            .cert-input-group {
                flex-direction: column;
            }

            .cert-input-group input {
                width: 100%;
            }

            .cert-input-group button {
                width: 100%;
            }
        }
    </style>

    <script type="module" src="assets/config.js"></script>
    <script src="assets/wallet.js"></script>
    <script src="assets/agents.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const pikachu = document.getElementById('pikachuContainer');
            const speech = document.getElementById('pikachuSpeech');
            const sprite = document.getElementById('pikachuSprite');

            // Initial position logic (bottom right)
            let currentX = window.innerWidth - 150;
            let currentY = window.innerHeight - 150;
            let targetX = currentX;
            let targetY = currentY;

            // Mouse follow logic with smooth delay
            document.addEventListener('mousemove', (e) => {
                // Target position: slightly offset from cursor
                targetX = e.clientX + 20;
                targetY = e.clientY + 20;

                // Flip sprite based on direction
                if (targetX < currentX) {
                    sprite.style.transform = 'scaleX(1)'; // Face left ? (Standard image faces left)
                    // Official artwork faces left by default.
                    // If moving left (targetX < current), keep default (scaleX(1)).
                    // If moving right (targetX > current), flip (scaleX(-1)).
                    sprite.style.transform = 'scaleX(1)';
                } else {
                    sprite.style.transform = 'scaleX(-1)';
                }
            });

            // Smooth animation loop
            function animate() {
                // Lerp for smooth movement (0.1 = speed)
                currentX += (targetX - currentX) * 0.1;
                currentY += (targetY - currentY) * 0.1;

                pikachu.style.left = `${currentX}px`;
                pikachu.style.top = `${currentY}px`;

                // Clear bottom/right from CSS
                pikachu.style.bottom = 'auto';
                pikachu.style.right = 'auto';

                requestAnimationFrame(animate);
            }
            animate();

            // Random Speech Logic
            const phrases = [
                "Pika Pika! (Check the Chart!)",
                "Need help? Ask the agents!",
                "Arbitrage opportunities located!",
                "Gengar is watching...",
                "Prices updated!",
                "Charizard is calculating hot deals!",
                "Sylveon is scanning data...",
                "Pika! (Click Start!)",
                "Don't forget to connect wallet!",
                "Dragonite is checking rates!",
                "Pika... chu!",
                "Market is volatile today!"
            ];

            function speak() {
                const text = phrases[Math.floor(Math.random() * phrases.length)];
                speech.textContent = text;
                speech.classList.add('show');

                // Hide after 3 seconds
                setTimeout(() => {
                    speech.classList.remove('show');
                }, 3000);

                // Schedule next speech (5-10 seconds)
                const nextTime = Math.random() * 5000 + 5000;
                setTimeout(speak, nextTime);
            }

            // Start speaking after initial delay
            setTimeout(speak, 2000);
        });
    </script>
</body>

</html>